<!-- Search component -->
<app-search></app-search>
<!--/ Search component -->

<!-- Form Detail -->
<section id="file-detail">
  <h2 class="text-center mb-4">{{ "TITLE.file-h2" | translate }}</h2>
  <div class="card">
    <div class="card-body">
      <div class="form-group row">
        <!-- File ID -->
        <div class="col-6">
          <div class="col-12">
            <label for="fileId" class="col-form-label">{{ "FORM.fileId" | translate }}</label>
            <input class="form-control" type="text" value="{{id}}" id="fileId" disabled="disabled">
          </div>
        </div>
        <!--/ File ID -->
        <!-- File Owner -->
        <div class="col-6">
          <div class="col-12">
            <label for="owner" class="col-form-label">{{ "FORM.fileOwner" | translate }}</label>
            <input class="form-control" type="text" value="{{data.owner}}" id="owner" disabled="disabled">
          </div>
        </div>
        <!-- File Owner -->
      </div>
      <div class="form-group row">
        <!-- File Name -->
        <div class="col-6">
          <div class="col-12">
            <label for="fileName" class="col-form-label">{{ "FORM.fileName" | translate }}</label>
            <input class="form-control" type="text" value="{{data.expName}}" id="fileName" disabled="disabled">
          </div>
        </div>
        <!-- File Name -->
        <!-- File Date -->
        <div class="col-6">
          <div class="col-12">
            <label for="fileDate" class="col-form-label">{{ "FORM.fileDate" | translate }}</label>
            <input class="form-control" type="text" value="{{data.createdate}}" id="fileDate" disabled="disabled">
          </div>
        </div>
        <!--/ File Date -->
      </div>
      <div class="form-group row">
        <!-- Unity Family -->
        <div class="col-12">
          <div class="col-12">
            <label class="col-form-label">{{ "FORM.fileUFamily" | translate }}</label>
            <app-table-list [tableData]="dataUnityFamily"
                            [options]="optionsUF"
                            [rowTemplate]="unityFamily"
                            (reloadData)="reloadDataTable()">

              <ng-template #unityFamily let-item>
                  <td class="text-center" [ngClass]="{'info' : item.personRef === true}">
                    {{item.relation}} <i *ngIf="item.personRef === true" class="icon ion-information-circled float-left" placement="right" ngbTooltip="Persona de referencia"></i>
                  </td>
                  <td class="text-center" [ngClass]="{'info' : item.personRef === true}">
                    {{item.sex}}
                  </td>
                  <td class="text-center" [ngClass]="{'info' : item.personRef === true}">
                    {{item.birthday}}
                  </td>
                  <td class="text-center" [ngClass]="{'info' : item.personRef === true}">
                    {{item.register}}
                  </td>
                  <td class="text-center" [ngClass]="{'info' : item.personRef === true}">
                    {{item.unsubscribe}}
                    <button *ngIf="item.unsubscribe === ''" class="btn btn-outline-primary" (click)="open(content)">Dar de Baixa</button>
                    <!-- Modal -->
                    <ng-template #content let-modal>
                      <div class="modal-header">
                        <h4 class="modal-title" id="modal-unsubscribe"><span class="text-primary">Donar de baixa a:</span> {{item.relation}}</h4>
                        <button type="button" class="close bg-primary text-white" aria-label="Close" (click)="modal.dismiss('Cross click')">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <form>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="date-unsubscribe">Data de baixa <span class="text-primary">*</span></label>
                            <div class="input-group">
                              <input id="date-unsubscribe" class="form-control" placeholder="dd-mm-yyyy" type="date">
                            </div>
                          </div>
                          <div class="form-group" *ngIf="item.personRef === true">
                            <label for="date-unsubscribe">Quien sera la nueva persona de referencia <span class="text-primary">*</span></label>
                            <div class="input-group">
                              <select id="new-person-ref" class="form-control">
                                <option>Mare</option>
                                <option>Fill</option>
                                <option>Filla</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button type="submit" class="btn btn-outline-dark" (click)="modal.close('Save click')">Guardar</button>
                          <button type="button" class="btn btn-primary" aria-label="Close" (click)="modal.dismiss('Cross click')">Cancelar</button>
                        </div>
                      </form>
                    </ng-template>
                    <!--/ Modal -->
                  </td>
              </ng-template>
            </app-table-list>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-12 text-center pt-4 pb-3">
          <button type="button" class="btn btn-primary btn-large" (click)="open(content)">Afegir nou member</button>
          <!-- Modal -->
          <ng-template #content let-modal>
            <div class="modal-header">
              <h4 class="modal-title" id="modal-register"><span class="text-primary">Dar de alta</span></h4>
              <button type="button" class="close bg-primary text-white" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form>
              <div class="modal-body">
                <div class="form-group">
                  <label for="date-register">Data de alta <span class="text-primary">*</span></label>
                  <div class="input-group">
                    <input id="date-register" class="form-control" placeholder="dd-mm-yyyy" type="date">
                  </div>
                </div>
                <div class="form-group">
                  <label for="relation-register">Relaci√≥ <span class="text-primary">*</span></label>
                  <div class="input-group">
                    <select id="relation-register" class="form-control">
                      <option>Mare</option>
                      <option>Fill</option>
                      <option>Filla</option>
                      <option>Avi</option>
                      <option>Avia</option>
                      <option>Tiet</option>
                      <option>Tieta</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label for="sex-register">Sexe <span class="text-primary">*</span></label>
                  <div class="input-group">
                    <select id="sex-register" class="form-control">
                      <option>Home</option>
                      <option>Dona</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label for="date-birthday">Data de naiximent <span class="text-primary">*</span></label>
                  <div class="input-group">
                    <input id="date-birthday" class="form-control" placeholder="dd-mm-yyyy" type="date">
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-outline-dark" (click)="modal.close('Save click')">Guardar</button>
                <button type="button" class="btn btn-primary" aria-label="Close" (click)="modal.dismiss('Cross click')">Cancelar</button>
              </div>
            </form>
          </ng-template>
          <!--/ Modal -->

        </div>
      </div>
      <!--/ Unity Family -->
      <!-- File Observation -->
      <div class="form-group row">
        <div class="col-12 px-3">
          <label for="fileObservation" class="col-form-label">
            <i class="fa fa-pencil-square-o"></i> {{ "FORM.fileObs" | translate }}
          </label>
          <textarea class="form-control" type="text" value="" id="fileObservation"></textarea>
        </div>
      </div>
      <!--/ File Observation -->

      <!-- Table Files Valoraciones -->
      <div class="form-group row">
        <div class="col-12 px-3">
          <label for="fileObservation" class="col-form-label">
            <i class="fa fa-eye"></i> {{ "OBSTABLE.obs" | translate }}
          </label>
        </div>
      </div>
      <div class="row">
        <div [ngClass]="{'col-12' : obsData.length == 1, 'col-6' : obsData.length > 1}" class="text-center">
          <app-table-list [tableData]="obsData"
                          [options]="options"
                          [rowTemplate]="myRowInitDysplay"
                          (reloadData)="reloadData()">
            <ng-template #myRowInitDysplay let-item>
              <td>{{item.id}} {{item.fecha}}</td>
              <td><a [routerLink]="['/observations', {'id': item.id,'date': item.fecha}]" > <i class="fa fa-eye"></i> </a></td>
              <td><a *ngIf="item.permissionEdit === true" [routerLink]="['/observations', {'id': item.id,'date': item.fecha}]" > <i class="fa fa-pencil-square-o"> </i> </a></td>
            </ng-template>
          </app-table-list>
        </div>
        <div *ngIf="obsData.length > 1" class="col-6">
          <!-- Chart -->
          <img class="px-5" src="../../../../../assets/images/chart-demo.png" height="auto" width="100%"/>
          <!--/ Chart -->
        </div>
      </div>
      <!--/ Table Files Valoraciones -->
      <div class="form-group row">
        <div class="col-12 text-center pt-4 pb-3">
          <button type="button" class="btn btn-primary btn-large" [routerLink]="['/tabs']"> Crear nou diagnostic</button>
        </div>
      </div>
    </div>
  </div>
</section>
<!--/ Form Detail -->
